#Linux


Пример скрипта на Bash, который позволяет создать нового пользователя, задать ему пароль и добавить в нужную группу:

```bash
#!/bin/bash

# Проверка, запустил ли скрипт пользователь с правами администратора
if [[ $EUID -ne 0 ]]; then
   echo "Этот скрипт должен быть запущен от имени администратора (root)." 
   exit 1
fi

# Запрашиваем имя пользователя
read -p "Введите имя нового пользователя: " username

# Проверяем, существует ли уже такой пользователь
if id "$username" &>/dev/null; then
    echo "Пользователь с таким именем уже существует!"
    exit 2
fi

# Запрашиваем пароль для нового пользователя
read -s -p "Введите пароль для пользователя $username: " password
echo

# Запрашиваем группу для добавления пользователя
read -p "Введите группу для добавления пользователя: " group

# Проверяем, существует ли группа
if ! getent group "$group" > /dev/null 2>&1; then
    echo "Группа $group не существует. Создаём её..."
    groupadd "$group"
fi

# Создаём нового пользователя с заданным паролем
useradd -m -s /bin/bash "$username"

# Устанавливаем пароль для нового пользователя
echo "$username:$password" | chpasswd

# Добавляем пользователя в указанную группу
usermod -aG "$group" "$username"

echo "Пользователь $username успешно создан и добавлен в группу $group."
```

### Пояснение:

1. **Проверка прав администратора**: Скрипт проверяет, запущен ли он от имени пользователя с правами `root`. Если нет — выходит с ошибкой.
2. **Пользователь**: Скрипт запрашивает имя нового пользователя и проверяет, существует ли уже такой пользователь. Если существует — завершает выполнение с ошибкой.
3. **Пароль**: Скрипт запрашивает пароль для нового пользователя (ввод скрыт).
4. **Группа**: Скрипт запрашивает группу для добавления пользователя и проверяет её существование. Если группа не существует — создаёт её.
5. **Создание пользователя и добавление в группу**: Новый пользователь создаётся с домашним каталогом (`-m`), и ему устанавливается оболочка `/bin/bash`. Также добавляется в указанную группу.

### Как использовать:

1. Сохраните скрипт в файл, например `create_user.sh`.
2. Сделайте его исполнимым:
    
    ```bash
    chmod +x create_user.sh
    ```
    
3. Запустите скрипт с правами администратора:
    
    ```bash
    sudo ./create_user.sh
    ```
    

Скрипт автоматически создаст пользователя, установит ему пароль и добавит в указанную группу.
